/*!
 * d3.compose - Compose complex, data-driven visualizations from reusable charts and components with d3
 * v0.14.6 - https://github.com/CSNW/d3.compose - license: MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):t.d3c=e(t.d3)}(this,function(t){"use strict";function e(t,e,n){for(var i=0,r=e.length;r>i;i++)for(var a in e[i])n&&void 0!==t[a]||(t[a]=e[i][a]);return t}function n(t,e){return t.indexOf(e)>=0}function i(t){return t.filter(function(t){return t})}function r(t,e){return t.filter(function(t){return e.indexOf(t)<0})}function a(t){return e(t,et.call(arguments,1),!0)}function o(t){return e(t,et.call(arguments,1))}function s(t){return t.reduce(function(t,e){return t.concat(e)},[])}function u(t,e,n){if(t)for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i],i,t))return t[i]}function c(t,e){return null==t?void 0:null==e?t[0]:Array.prototype.slice.call(t,0,e)}function h(t){return t===!0||t===!1}function l(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function f(t){return"[object Number]"===nt.call(t)}function d(t){return"[object String]"===nt.call(t)}function p(t){return void 0===t}function y(t,e,n){if(t)for(var i=Object.keys(t),r=0,a=i.length;a>r;r++)e.call(n,t[i[r]],i[r],t)}function v(t,e,n){if(t)for(var i=Object.keys(t),r=0,a=i.length;a>r;r++)if(e.call(n,t[i[r]],i[r],t))return t[i[r]]}function g(t,e){return t?t.map(function(t){return t[e]}):[]}function m(t){for(var e=[],n=0,i=t.length;i>n;n++)e.indexOf(t[n])<0&&e.push(t[n]);return e}function w(t,e){return p(t)?e:t}function x(t,e){e=e||{};var n=e.prop_key||"__properties",i=function(r){function a(){return r=w(s[t],i.default_value),it(r)&&"Function"!=e.type&&(r=r.call(this)),it(e.get)?e.get.call(u,r):r}function o(){if(it(e.validate)&&!p(r)&&!e.validate.call(this,r))throw new Error("Invalid value for "+t+": "+JSON.stringify(r));var n=s[t];if(s[t]=r,it(e.set)&&!p(r)){var i=e.set.call(u,r,n);i&&"override"in i&&(s[t]=i.override),i&&it(i.after)&&i.after.call(u,s[t])}return this}var s=this[n]=this[n]||{},u=w(i.context,this);return arguments.length?o.call(this):a.call(this)};return i.is_property=!0,i.set_from_options=w(e.set_from_options,!0),i.default_value=e.default_value,i.context=e.context,i.options=e,i}function _(e){var n=b(e);if(n.width&&n.height)return n;var i=S(e);if(A(e))return{width:null!=n.width?n.width:i.width||0,height:null!=n.height?n.height:i.height||0};var r=L(e);return{width:t.max([n.width,i.width||r.width])||0,height:t.max([n.height,i.height||r.height])||0}}function b(t){var e=t.node(),n={width:e&&e.clientWidth,height:e&&e.clientHeight};if(A(t)&&(!e.clientWidth||!e.clientHeight)&&"undefined"!=typeof window&&window.getComputedStyle){var i=window.getComputedStyle(e);n.height=parseFloat(i.height)-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth),n.width=parseFloat(i.width)-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}return n}function S(t){return{width:t&&t.attr&&parseFloat(t.attr("width")),height:t&&t.attr&&parseFloat(t.attr("height"))}}function L(t){var e,n=t.node();try{e=n&&"function"==typeof n.getBBox&&n.getBBox()}catch(i){e={width:0,height:0}}return e}function A(t){return"svg"==t.node().nodeName}function k(e){if(e=e||{},it(e))return e;var i;i="time"==e.type?t.time.scale():t.scale[e.type]?t.scale[e.type]():t.scale.linear(),y(e,function(t,e){i[e]&&("range"==e||"domain"==e?i[e](t):n(["type","data","value","key","centered","adjacent","series","padding"],e)||i[e].apply(i,t))}),!e.domain&&e.data&&(e.key||e.value)&&(i=C(i,e));var r=e.centered||"ordinal"==e.type&&null==e.centered;return"ordinal"==e.type&&(r||e.adjacent)&&(i=I(i,e)),"ordinal"==e.type&&(null!=e.padding||r||e.adjacent)&&(i=B(i,e)),i}function C(t,e){var n=e.value||function(t){return t[e.key]},i=e.data;P(i)||(i=[{values:i}]);var r;if("ordinal"==e.type)r=m(s(i.map(function(t){return t&&t.values?t.values.map(n):void 0})));else{var a=M(i,n);r=[0>a?a:0,R(i,n)]}return t.domain(r),t}function I(t,e){var n=e.series||(P(e.data)?e.data.length:1),i=function(t,e,n){var i=function(n,r){var a=i.width();return e.adjacent||(r=0),t(n)+.5*a+a*(r||0)};return o(i,t,{width:function(){var t=i.rangeBand&&i.rangeBand(),r=isFinite(t)?t:0;return e.adjacent&&(r/=n),r}}),i}(t,e,n);return i}function B(t,e){var n=null!=e.padding?e.padding:.1,i=t.range;return t.range=function(e){return arguments.length?void t.rangeBands(e,n,n/2):i()},e.range&&t.range(e.range),t}function F(t){t=Array.isArray(t)?t:Array.prototype.slice.call(arguments);var e=o.apply(null,[{}].concat(t));return delete e.constructor,e.initialize&&(e.initialize=function(){var e=Array.prototype.slice.call(arguments);t.forEach(function(t){t.initialize&&t.initialize.apply(this,e)},this)}),e.transform&&(e.transform=function(e){return t.reduceRight(function(t,e){return e&&e.transform?e.transform.call(this,t):t}.bind(this),e)}),e}function z(e){function n(t){return t>0&&e.padding?e.padding:0}return e=o({direction:"vertical",origin:"top",padding:0,min_height:0,min_width:0},e),"horizontal"==e.direction&&"left"!=e.origin&&"right"!=e.origin?e.origin="left":"vertical"==e.direction&&"top"!=e.origin&&"bottom"!=e.origin&&(e.origin="top"),function(i){if(i&&i.attr){var r=0;i.attr("transform",function(i,a){var o,s=this.getBBox(),u=t.max([s.width,e.min_width]),c=t.max([s.height,e.min_height]),h=0,l=0;return"horizontal"==e.direction?(o=r+u+n(a),h="left"==e.origin?r+n(a):o,r=o):(o=r+c+n(a),l="top"==e.origin?r+n(a):o,r=o),E(h,l)})}}}function E(t,e){return l(t)&&(e=t.y,t=t.x),"translate("+(t||0)+", "+(e||0)+")"}function D(t,e){var n="rotate("+(t||0);return e&&(n+=" "+(e.x||0)+","+(e.y||0)),n+=")"}function j(t,e){var n=0;try{var i=t.getBBox().height,r=window.getComputedStyle(t),a=parseFloat(r["font-size"]),o=parseFloat(r["line-height"]);isNaN(o)&&(o=1.15*a);var s=-(o-a)/2,u=0;e&&e>0&&(u=(e-i)/2),n=i+(s||0)+(u||0)}catch(c){}return n}function P(t){var e=c(t);return e&&l(e)&&Array.isArray(e.values)}function R(e,n){var i=function(e){return e&&t.extent(e,n)[1]};return P(e)?e.reduce(function(t,e){if(e&&Array.isArray(e.values)){var n=i(e.values);return n>t?n:t}return t},-(1/0)):i(e)}function M(e,n){var i=function(e){return e&&t.extent(e,n)[0]};return P(e)?e.reduce(function(t,e){if(e&&Array.isArray(e.values)){var n=i(e.values);return t>n?n:t}return t},1/0):i(e)}function O(t){if(!t)return"";var e=[];return y(t,function(t,n){e.push(n+": "+t)}),t=e.join("; "),t?t+";":""}function Y(t,e){return f(t)?{top:t,right:t,bottom:t,left:t}:a({},t,e,{top:0,right:0,bottom:0,left:0})}function X(t){var e=function(e,n,i){return t.call(this,void 0,e,n,i)};return e._is_di=!0,e.original=t,e}function N(t,e){return function(n,i,r){return(t.original||t).call(this,e,n,i,r)}}function V(t){for(var e in t)t[e]&&t[e]._is_di&&(t[e]=N(t[e],t))}function W(e){if(e._parent_data)return e._parent_data;var n=e&&e.parentNode;if(n){var i=t.select(n).data();return i&&i[0]}}function K(t){return function(e,n){return n||(n=e,e=void 0),o({id:e,type:t},n)}}function T(t){function e(t,e,n){return a({},t,{id:i(e,n)})}function n(t,e){t&&it(t.position)?t.position(e):t.position=e}function i(t,e,n){var i="item-"+(t+1)+"-"+(e+1);return null!=n&&(i+="-"+(n+1)),i}function r(t){return function(e){e.data&&!it(e.data)&&(o[t][e.id]=e.data,o[e.id]=e.data,delete e.data)}}if(t){var o={_charts:{},_components:{}},s={},u=[],c=[],h=[],l=[];if(!Array.isArray(t)){var f=H(t);t=f.options,l=f.unknown_position}var d={row:!1,charts:!1};return t.forEach(function(t,r){var o=[];Array.isArray(t)||(t=[t]),t.length>1&&(d.row=!0);var l=t.map(function(u,l){if(u){if(u._layered){d.charts=d.row=!0;var f=[];return u.items.forEach(function(t,e){t=a({},t,{id:i(r,l,e)}),f.push(t.id),c.push(t),s[t.id]=t}),f}var p=e(u,r,l);return s[p.id]=p,t.length>1?d.charts?(n(p,"right"),o.push(p)):(n(p,"left"),o.unshift(p)):d.row?(n(p,"bottom"),h.push(p)):(n(p,"top"),h.unshift(p)),p.id}});o.length&&(h=h.concat(o)),u.push(l)}),h.push.apply(h,l),c.forEach(r("_charts")),h.forEach(r("_components")),{data:o,items:s,layout:u,charts:c,components:h}}}function H(t){"undefined"!=typeof console&&console.warn&&console.warn("DEPRECATED - object-style options have been deprecated for array-style options and will be removed in the next version of d3.compose");var e=[],n={_layered:!0,items:[]},i={top:[],right:[],bottom:[],left:[],unknown:[]};if(y(t.charts,function(t,e){n.items.push(o({id:e},t))}),y(t.components,function(t,e){t=o({id:e},t),i[t.position]?i[t.position].push(t):i.unknown.push(t)}),e=i.top.reverse(),i.left.length||n.items.length||i.right.length){var r=i.left.reverse();n.items.length&&r.push(n),r=r.concat(i.right),e.push(r)}return e.push.apply(e,i.bottom),{options:e,unknown_position:i.unknown}}function U(t,e,i){var r={top:[],right:[],bottom:[],left:[]};return t.forEach(function(t){if(!t.skip_layout&&t.getLayout){var a=t.getLayout(i(t.id,e)),o=a&&a.position;n(["top","right","bottom","left"],o)&&r[o].push({offset:"top"==o||"bottom"==o?a.height:a.width,component:t})}}),r}function q(t,e,n,i){function r(t,e,n,i){t&&it(t.setLayout)&&t.setLayout(e,n,i)}t.top.reduce(function(t,n){var i=t-n.offset;return r(n.component,e.left,i,{width:e.width}),i},e.top),t.right.reduce(function(t,n,i,a){var o=a[i-1]||{offset:0},s=t+o.offset;return r(n.component,s,e.top,{height:e.height}),s},n-e.right),t.bottom.reduce(function(t,n,i,a){var o=a[i-1]||{offset:0},s=t+o.offset;return r(n.component,e.left,s,{width:e.width}),s},i-e.bottom),t.left.reduce(function(t,n){var i=t-n.offset;return r(n.component,i,e.top,{height:e.height}),i},e.left)}function Z(t){return Array.isArray(t)||(t=Array.prototype.slice.call(arguments)),{_layered:!0,items:t}}function J(t,e){return u(t,function(t){return t.id==e})}function G(t,e){return e?(P(e)||(e=[{values:e}]),e.map(function(e,n){return e.values.map(function(i,r){return t.getPoint.call({_parent_data:e},i,r,n)}).sort(function(t,e){return t.meta.x-e.meta.x})})):void 0}function Q(t,e,n){function r(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}return i(t.map(function(t){function i(t){return t.distance=r(t.meta,e),t}function a(t){return t.distance<n}function o(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0}var s=t.map(i).filter(a).sort(o);return s[0]}))}function $(t,e,i){var r=g(t,"key"),a=g(e,"key");y(e,function(t){n(r,t.key)?i.trigger("mousemove:point",t):i.trigger("mouseenter:point",t)}),y(t,function(t){n(a,t.key)||i.trigger("mouseleave:point",t)})}function tt(t,e,n,i){var r={layer:"layer",series:"seriesLayer"}[e];if(r&&t[r]){var a={};return["enter","enter:transition","update","update:transition","merge","merge:transition","exit","exit:transition"].forEach(function(e){var n="on"+e.split(":").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join("");t[n]&&(a[e]=function(){this.chart()[n](this)})}),t[r](n,i,{dataBind:function(t){return this.chart().onDataBind(this,t)},insert:function(){return this.chart().onInsert(this)},events:a})}}var et=Array.prototype.slice,nt=Object.prototype.toString,it=function(t){return"[object Function]"===nt.call(t)};"function"!=typeof/./&&"object"!=typeof Int8Array&&(it=function(t){return"function"==typeof t||!1});var rt={contains:n,compact:i,difference:r,defaults:a,extend:o,flatten:s,find:u,first:c,isBoolean:h,isFunction:it,isObject:l,isNumber:f,isString:d,isUndefined:p,objectEach:y,objectFind:v,pluck:g,uniq:m,valueOrDefault:w},at={property:x,dimensions:_,translate:E,rotate:D,alignText:j,isSeriesData:P,max:R,min:M,createScale:k,style:O,getMargins:Y,stack:z,di:X,bindDi:N,bindAllDi:V,getParentData:W,mixin:F,createHelper:K},ot=t.chart("Base",{initialize:function(t){V(this),t&&this.options(t)},data:x("data"),options:x("options",{default_value:{},set:function(t,e){function n(t,e){return t[e]&&t[e].is_property&&t[e].set_from_options}if(e){var i=r(Object.keys(e),Object.keys(t));i.forEach(function(t){"data"!=t&&"options"!=t&&n(this,t)&&this[t](void 0)},this)}y(t,function(t,e){n(this,e)&&this[e](t)},this)}}),width:function(){return _(this.base).width},height:function(){return _(this.base).height},transform:function(t){return t=t||[],this.data(t),t},draw:function(e){this.trigger("before:draw",e),t.chart().prototype.draw.apply(this,arguments),this.trigger("draw",e)}}),st=ot.extend("Chart",{},{z_index:100,layer_type:"chart"}),ut=ot.extend("Component",{position:x("position",{default_value:"top",validate:function(t){return n(["top","right","bottom","left"],t)}}),width:x("width",{default_value:function(){return _(this.base).width}}),height:x("height",{default_value:function(){return _(this.base).height}}),margins:x("margins",{set:function(t){return{override:Y(t)}},default_value:Y()}),centered:x("centered",{default_value:!1}),skip_layout:!1,prepareLayout:function(t){this.draw(t)},getLayout:function(t){this.prepareLayout(t);var e=this.margins();return{position:this.position(),width:this.width()+e.left+e.right,height:this.height()+e.top+e.bottom}},setLayout:function(t,e,n){var i=this.margins();this.centered()?(n.height&&(e+=(n.height-this.height())/2),n.width&&(t+=(n.width-this.width())/2)):(t+=i.left,e+=i.top),this.base.attr("transform",E(t,e)),this.height(n&&n.height),this.width(n&&n.width)}},{z_index:50,layer_type:"component"}),ct=ut.extend("Overlay",{initialize:function(){this.base.attr("style",this.style())},skip_layout:!0,x:x("x",{default_value:0}),y:x("y",{default_value:0}),hidden:x("hidden",{default_value:!0}),style:x("style",{default_value:function(){var t={position:"absolute",top:0,left:0,transform:E(this.x()+"px",this.y()+"px")};return this.hidden()&&(t.display="none"),O(t)}}),position:function(t,e){if(arguments.length>1)t={x:t,y:e};else if("container"in t)t=this.getAbsolutePosition(t.container);else if("chart"in t)if(this.container){var n=this.container.chartPosition();t=this.getAbsolutePosition({x:t.chart.x+n.left,y:t.chart.y+n.top})}else t=this.getAbsolutePosition(t.chart);this.x(t.x).y(t.y),this.base.attr("style",this.style())},show:function(){this.hidden(!1),this.base.attr("style",this.style())},hide:function(){this.hidden(!0),this.base.attr("style",this.style())},getAbsolutePosition:function(t){var e=this.container&&this.container.container;if(e&&this.container.responsive()){var n=_(e),i=this.container.width(),r=this.container.height(),a=n.width/i,o=n.height/r;return{x:a*t.x,y:o*t.y}}return t}},{layer_type:"overlay"}),ht={top:10,right:10,bottom:10,left:10},lt=ot.extend("Compose",{initialize:function(){this.transform=function(t){return this.rawData(t),t},"svg"!=this.base.node().tagName?(this.container=this.base.append("div").attr("class","chart-compose-container"),this.base=this.container.append("svg").attr("xlmns","http://www.w3.org/2000/svg").attr("version","1.1").attr("class","chart-compose")):this.base.classed("chart-compose",!0),this.attachHoverListeners()},options:x("options",{default_value:function(){},type:"Function",set:function(t){return it(t)?void 0:{override:function(){return t}}}}),rawData:x("rawData"),margins:x("margins",{default_value:ht,set:function(t){return{override:Y(t,ht)}}}),chartPosition:x("chartPosition",{default_value:{top:0,right:0,bottom:0,left:0},set:function(t){return{override:a({},t,{top:0,right:0,bottom:0,left:0})}},get:function(t){return t.width=this._width()-t.right-t.left,t.height=this._height()-t.bottom-t.top,t}}),width:x("width",{default_value:null}),height:x("height",{default_value:null}),_width:function(){var t=this.width();return null!=t?t:ot.prototype.width.call(this)},_height:function(){var t=this.height();return null!=t?t:ot.prototype.height.call(this)},responsive:x("responsive",{default_value:!0}),viewBox:x("viewBox",{default_value:function(){return this.responsive()&&this.width()&&this.height()?"0 0 "+this.width()+" "+this.height():null}}),preserveAspectRatio:x("preserveAspectRatio",{default_value:function(){return this.responsive()?"xMidYMid meet":null}}),containerStyle:x("containerStyle",{default_value:function(){if(this.responsive()){var t=1;return this.width()&&this.height()&&(t=this.height()/this.width()),O({width:"100%",height:0,"padding-top":100*t+"%",position:"relative"})}return O({position:"relative"})}}),baseStyle:x("baseStyle",{default_value:function(){return this.responsive()&&this.container?O({position:"absolute",top:0,left:0}):null}}),charts:x("charts",{set:function(t,e){return{override:this._attachItems(t,e,this)}},default_value:[]}),components:x("components",{set:function(t,e){return{override:this._attachItems(t,e,this)}},default_value:[]}),delay:x("delay",{type:"Function"}),duration:x("duration",{type:"Function"}),ease:x("ease",{type:"Function"}),draw:function(e){var n=this._prepareConfig(this.options(),e);n||(n={data:{_charts:{},_components:{}},layout:[]}),this.charts(n.charts),this.components(n.components),e={original:e,config:n.data},this.data(e),this._setDimensions(),this.layout(n.layout,e),t.chart().prototype.draw.call(this,e)},redraw:function(){this.rawData()&&this.draw(this.rawData().original)},demux:function(t,e){return e&&e.config&&e.original?J(this.charts(),t)&&e.config._charts[t]?e.config._charts[t]:J(this.components(),t)&&e.config._components[t]?e.config._components[t]:e.original:e},createChartLayer:function(t){return this.base.append("g").attr("class","chart-layer").attr("data-zIndex",t&&t.z_index)},createComponentLayer:function(t){return this.base.append("g").attr("class","chart-component-layer").attr("data-zIndex",t&&t.z_index)},createOverlayLayer:function(){if(!this.container)throw new Error("Cannot create overlay layer if original selection \"d3.select(...).chart('Compose')\" is an svg. Use a div instead for responsive and overlay support.");return this.container.append("div").attr("class","chart-overlay-layer")},layout:function(t,e){this._positionChartLayers(),t=this._extractLayout(e);var n=o({},this.margins());y(t,function(t,e){t.forEach(function(t){n[e]+=t.offset||0})}),this.chartPosition(n),this.positionLayers(t)},attachHoverListeners:function(){function e(){var e=t.mouse(document.documentElement);return e[0]>=u.left&&e[0]<=u.right&&e[1]>=u.top&&e[1]<=u.bottom}function n(){h("mouseenter",a(t.mouse(d)))}function i(){h("mousemove",a(t.mouse(d)))}function r(){h("mouseleave")}function a(t){var e=t[0],n=t[1],i=e-s.left,r=n-s.top;return e>s.left+s.width?i=s.width:e<s.left&&(i=0),n>s.top+s.height?r=s.height:n<s.top&&(r=0),{container:{x:e,y:n},chart:{x:i,y:r}}}var s,u,c,h=this.trigger.bind(this),l=this.chartPosition.bind(this),f=this.container||this.base,d=this.base.node();f.on("mouseenter",function(){s=l(),u=o({},d.getBoundingClientRect()),u.top+=window.scrollY,u.bottom+=window.scrollY,c=e(u),c&&n()}),f.on("mousemove",function(){var t=e(u);c&&t?i():c?r():t&&n(),c=t}),f.on("mouseleave",function(){c&&(c=!1,r())})},attach:function(t,e){e.id=t,e.base.attr("data-id",t),e.container=this,ot.prototype.attach.call(this,t,e),e&&it(e.trigger)&&e.trigger("attach")},detach:function(t,e){e.base.remove(),delete this._attached[t],e&&it(e.trigger)&&e.trigger("detach")},positionLayers:function(t){this._positionChartLayers(),this._positionComponents(t),this._positionByZIndex()},_setDimensions:function(){this.container&&this.container.attr("style",this.containerStyle()),this.base.attr("viewBox",this.viewBox()).attr("preserveAspectRatio",this.preserveAspectRatio()).attr("style",this.baseStyle()).attr("width",this.responsive()?null:this.width()).attr("height",this.responsive()?null:this.height())},_attachItems:function(e,n,i){e=e||[],n=n||[];var a=r(g(n,"id"),g(e,"id"));return a.forEach(function(t){i.detach(t,J(n,t))}),e.map(function(e){var r=e.id,a=J(n,r);if(e instanceof t.chart())return a&&i.detach(r,a),i.attach(r,e),e;if(a&&a.type!=e.type&&(i.detach(r,a),a=void 0),a)a.options(e);else{var o=t.chart(e.type);if(!o)throw new Error("No registered d3.chart found for "+e.type);var s={z_index:o.z_index||0},u={chart:"createChartLayer",component:"createComponentLayer",overlay:"createOverlayLayer"}[o.layer_type];if(!u)throw new Error('Unrecognized layer type "'+o.layer_type+'" for '+e.type);var c=i[u](s);a=new o(c,e),a.type=e.type,i.attach(r,a)}return a})},_prepareConfig:function(t,e){return T(t(e))},_positionChartLayers:function(){var t=this.chartPosition();this.base.selectAll(".chart-layer").attr("transform",E(t.left,t.top)).attr("width",t.width).attr("height",t.height)},_positionComponents:function(t){var e=this.chartPosition(),n=this._width(),i=this._height();q(t,e,n,i)},_positionByZIndex:function(){function e(e){return{layer:e,zIndex:parseInt(t.select(e).attr("data-zIndex"))||0}}function n(t,e){return t.zIndex<e.zIndex?-1:t.zIndex>e.zIndex?1:0}function i(t){return t.layer}var r=this.base.selectAll(".chart-layer, .chart-component-layer")[0];r=r.map(e).sort(n).map(i),r.forEach(function(t){t&&t.parentNode&&t.parentNode.appendChild&&t.parentNode.appendChild(t)})},_extractLayout:function(t){return U(this.components(),t,this.demux.bind(this))}}),ft={seriesKey:X(function(t,e){return e.key}),seriesValues:X(function(t,e,n){return e.seriesIndex=n,e.values}),seriesClass:X(function(t,e,n){return"chart-series chart-index-"+n+(e["class"]?" "+e["class"]:"")}),seriesIndex:X(function(t,e,n){var i=t.seriesData.call(this,e,n);return i&&i.seriesIndex||0}),seriesData:X(function(){return W(this)}),itemStyle:X(function(t,e){return O(e.style)||null}),seriesCount:function(){var t=this.data();return t&&P(t)?t.length:1},seriesLayer:function(e,n,i){if(i&&i.dataBind){var r=i.dataBind;i.dataBind=function(t){var e=this.chart(),n=this.selectAll("g").data(t,e.seriesKey);return n.enter().append("g"),n.attr("class",e.seriesClass).attr("style",e.itemStyle),n.exit().remove(),n.chart=function(){return e},r.call(n,e.seriesValues)}}return t.chart().prototype.layer.call(this,e,n,i)},transform:function(t){return P(t)?t:[{values:t}]}},dt={initialize:function(){this.on("before:draw",this.setScales.bind(this))},transform:function(t){function e(t,e){return l(t)?!Array.isArray(t)&&p(t.x)&&(t.x=e):t={x:e,y:t},t}return t=t||[],P(t)?t=t.map(function(t){return o({},t,{values:t.values.map(e)})}):Array.isArray(t)&&(t=t.map(e)),t},xScale:x("xScale",{type:"Function",set:function(t){var e=k(t);return this.setXScaleRange(e),{override:e}},get:function(t){return t||(t=this.getDefaultXScale(),this.setXScaleRange(t)),t}}),yScale:x("yScale",{type:"Function",set:function(t){var e=k(t);return this.setYScaleRange(e),{override:e}},get:function(t){return t||(t=this.getDefaultYScale(),this.setYScaleRange(t)),t}}),xKey:x("xKey",{default_value:"x"}),yKey:x("yKey",{default_value:"y"}),x:X(function(t,e,n){var i=t.xValue.call(this,e,n),r=t.seriesIndex&&t.seriesIndex.call(this,e,n)||0;return parseFloat(t.xScale()(i,r))}),y:X(function(t,e,n){var i=t.yValue.call(this,e,n),r=t.seriesIndex&&t.seriesIndex.call(this,e,n)||0;return parseFloat(t.yScale()(i,r))}),key:X(function(t,e,n){return w(e.key,t.xValue.call(this,e,n))}),x0:function(){return parseFloat(this.xScale()(0))},y0:function(){return parseFloat(this.yScale()(0))},xValue:X(function(t,e){var n=t.xKey();return e?n in e?e[n]:e[0]:void 0}),yValue:X(function(t,e){var n=t.yKey();return e?n in e?e[n]:e[1]:void 0}),setScales:function(){this.setXScaleRange(this.xScale()),this.setYScaleRange(this.yScale())},setXScaleRange:function(t){t.range([0,this.width()])},setYScaleRange:function(t){t.range([this.height(),0])},getDefaultXScale:function(){return k({data:this.data(),key:"x"})},getDefaultYScale:function(){return k({data:this.data(),key:"y"})}},pt=o({},dt,{adjacentWidth:function(){var t=this.seriesCount?this.seriesCount():1;return this.layeredWidth()/t},layeredWidth:function(){var t=this.xScale()&&this.xScale().rangeBand&&this.xScale().rangeBand(),e=isFinite(t)?t:0;return e},itemWidth:function(){var t=this.xScale();return t&&t.width?t.width():this.layeredWidth()},getDefaultXScale:function(){return k({type:"ordinal",data:this.data(),key:"x",centered:!0})}}),yt={x:X(function(t,e,n){var i=t.yValue.call(this,e,n),r=t.seriesIndex&&t.seriesIndex.call(this,e,n)||0;return parseFloat(t.yScale()(i,r))}),y:X(function(t,e,n){var i=t.xValue.call(this,e,n),r=t.seriesIndex&&t.seriesIndex.call(this,e,n)||0;return parseFloat(t.xScale()(i,r))}),x0:function(){return parseFloat(this.yScale()(0))},y0:function(){return parseFloat(this.xScale()(0))},setXScaleRange:function(t){t.range([this.height(),0])},setYScaleRange:function(t){t.range([0,this.width()])}},vt={attachLabels:function(){var e=this.labels();e.parent=this;var n=t.chart(e.type),i=this.base.append("g").attr("class","chart-labels"),r=this._labels=new n(i,e);this.proxyLabelMethods.forEach(function(t){r[t]=this[t]},this),this.on("draw",function(t){e=this.labels(),e.parent=this,r.options(e),r.draw(e.display!==!1?e.data||t:[])}.bind(this))},labels:x("labels",{get:function(t){return h(t)?t={display:t}:t||(t={display:!1}),a({},t,{type:"Labels"})}}),proxyLabelMethods:[]},gt=o({},vt,{proxyLabelMethods:["x","y"]}),mt={initialize:function(){this.on("attach",function(){this.container.on("mouseenter",this.onMouseEnter.bind(this)),this.container.on("mousemove",this.onMouseMove.bind(this)),this.container.on("mouseleave",this.onMouseLeave.bind(this))}.bind(this))},getPoint:X(function(t,e,n,i){var r=t.key&&t.key.call(this,e,n,i),a=t.seriesData&&t.seriesData.call(this,e,n,i)||{};return{key:(a.key||i)+"."+(r||n),series:a,d:e,meta:{chart:t,i:n,j:i,x:t.x&&t.x.call(this,e,n,i),y:t.y&&t.y.call(this,e,n,i)}}}),mouseEnterPoint:X(function(t,e,n,i){t.container.trigger("mouseenter:point",t.getPoint.call(this,e,n,i))}),mouseLeavePoint:X(function(t,e,n,i){t.container.trigger("mouseleave:point",t.getPoint.call(this,e,n,i))}),onMouseEnter:function(){},onMouseMove:function(){},onMouseLeave:function(){}},wt={initialize:function(){var t,e,n;this.on("draw",function(){t=null}),this.on("attach",function(){var i=function(i){var r=[];i&&(r=Q(t,i.chart,e)),$(n,r,this.container),n=r}.bind(this);this.container.on("mouseenter",function(n){t||(t=G(this,this.data())),e=this.hoverTolerance(),i(n)}.bind(this)),this.container.on("mousemove",i),this.container.on("mouseleave",i)}.bind(this))},hoverTolerance:x("hoverTolerance",{default_value:1/0})},xt={delay:x("delay",{set:function(t){return{override:function(){return t}}},default_value:function(){return this.container&&this.container.delay&&this.container.delay()}}),duration:x("duration",{set:function(t){return{override:function(){return t}}},default_value:function(){return this.container&&this.container.delay&&this.container.duration()}}),ease:x("ease",{set:function(t){return{override:function(){return t}}},default_value:function(){return this.container&&this.container.delay&&this.container.ease()}}),setupTransition:function(t){var e=this.delay(),n=this.duration(),i=this.ease();p(e)||t.delay(e),p(n)||t.duration(n),p(i)||t.ease(i)}},_t={standardLayer:function(t,e){return tt(this,"layer",t,e)},standardSeriesLayer:function(t,e){return tt(this,"series",t,e)},onDataBind:function(){},onInsert:function(){},onEnter:function(){},onUpdate:function(){},onMerge:function(){},onExit:function(){}},bt={Series:ft,XY:dt,XYValues:pt,XYInverted:yt,Labels:vt,LabelsXY:gt,Hover:mt,HoverPoints:wt,Transition:xt,StandardLayer:_t,InvertedXY:yt,XYLabels:gt},St=t.compose={VERSION:"0.14.6",utils:rt,helpers:at,Base:ot,Chart:st,Component:ut,Overlay:ct,Compose:lt,layered:Z,mixins:bt},Lt=St;return Lt});
//# sourceMappingURL=d3.compose-mixins.min.js.map