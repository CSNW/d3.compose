<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>d3.chart.multi Example</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" type="text/css" href="css/default.css">

  <link rel="stylesheet" type="text/css" href="../dist/css/d3.chart.multi.base.css">
  <style>
    .input .chart-line, .input2 .chart-line {
      stroke-dasharray: 4,4;
    }

    .example {
      margin-bottom: 16px;
    }
    .example-chart {
      margin-top: 10px;
    }
    .highlighted {
      fill: #2ca02c;
    }
  </style>

  <script src="../bower_components/d3/d3.js"></script>
  <script src="../bower_components/d3.chart/d3.chart.js"></script>
  <script src="../bower_components/underscore/underscore.js"></script>

  <script src="../tmp/d3.chart.multi.js"></script>

  <script src="js/data.js"></script>
</head>
<body>
  <div class="container">
    <h1>d3.chart.multi Examples</h1>

    <section class="example">
      <h2>Line-Bar</h2>
      <svg id="chart-1"></svg>

      <script type="text/javascript">
        var chart = d3.select('#chart-1')
          .chart('Multi', function(data) {
            var scales = {
              x: {type: 'ordinal', domain: [2000, 2005, 2010, 2015, 2020]},
              y: {domain: [0, 20000]},
              y2: {domain: [0, 90]}
            };

            return {
              charts: {
                bars: {
                  type: 'Bars', 
                  data: data.results,
                  xScale: scales.x,
                  yScale: scales.y,

                  labels: {
                    offset: 8,
                    position: 'top|bottom',
                    style: {
                      'font-size': '14px'
                    },
                    format: d3.format(',0d')
                  }
                },
                line: {
                  type: 'LineValues',
                  data: data.input,
                  xScale: scales.x,
                  yScale: scales.y2,

                  labels: {
                    position: 'top'
                  }
                }
              },
              axes: {
                x: {
                  type: 'AxisValues',
                  title: 'X Title',
                  scale: scales.x,
                  position: 'bottom'
                },
                y: {
                  title: 'Y1 Title',
                  scale: scales.y,
                  position: 'left'
                },
                y2: {
                  title: 'Y2 Title',
                  scale: scales.y2,
                  position: 'right'
                }
              },
              legend: {
                type: 'InsetLegend',
                position: {x: 10, y: 0}
              },
              title: 'Chart Title'
            }
          })
          .width(600)
          .height(400)
          .margins({top: 10, right: 10, bottom: 10, left: 10});

        chart.draw(data['chart-1']);
      </script>
    </section>
    
    <section class="example">
      <h2>Lines</h2>
      <svg id="chart-2"></svg>

      <script type="text/javascript">
        var chart = d3.select('#chart-2')
          .chart('Multi', function(data) {
            var scales = {
              x: {domain: [2000, 2020]},
              y: {data: data.lines, key: 'y'}
            };

            return {
              charts: {
                line: {type: 'Line', data: data.lines, xScale: scales.x, yScale: scales.y, labels: false},
                labels: {type: 'Labels', data: data.labels, xScale: scales.x, yScale: scales.y, offset: 5}
              },
              axes: {
                x: {position: 'bottom', scale: scales.x, title: 'Year', tickFormat: d3.format('####')},
                y: {position: 'left', scale: scales.y, title: 'Results'}
              },
              legend: {
                display: 'right',
                data: data.lines
              },
              title: 'Results by Year'
            };
          })
          .width(600)
          .height(400)
          .margins({top: 10, right: 10, bottom: 10, left: 10});

        chart.draw(data['chart-2']);
      </script>
    </section>

    <section class="example">
      <h2>Bars</h2>
      <svg id="chart-3"></svg>

      <script type="text/javascript">
        var chart = d3.select('#chart-3')
          .chart('Multi', function(data) {
            var scales = {
              x: {type: 'ordinal', data: data.bars, key: 'x'},
              y: {data: data.bars, key: 'y'}
            };

            return {
              charts: {
                bars: {
                  type: 'Bars', 
                  data: data.bars, xScale: scales.x, yScale: scales.y,
                  labels: {format: d3.format(',0d')}
                }
              },
              axes: {
                y: {position: 'left', scale: scales.y, title: 'Results'}
              },
              title: 'Results'
            };
          })
          .width(600)
          .height(400)
          .margins({top: 10, right: 10, bottom: 10, left: 10});

        chart.draw(data['chart-3']);
      </script>
    </section>

    <section class="example">
      <h2>Stacked Bars</h2>
      <svg id="chart-4"></svg>

      <script type="text/javascript">
        var chart = d3.select('#chart-4')
          .chart('Multi', function(data) {
            // TODO inverted XY
            var scales = {
              x: {type: 'ordinal', data: data.stacked, key: 'x'},
              y: {domain: [0, 200]},
              y2: {domain: [0, 100]}
            };

            return {
              charts: {
                stacked: {
                  type: 'StackedBars',
                  data: data.stacked, xScale: scales.x, yScale: scales.y
                }
              },
              axes: {
                y: {position: 'left', scale: scales.y},
                y2: {position: 'right', scale: scales.y2}
              },
              legend: {
                margins: {left: 0.2}
              },
              title: 'Stacked Bars'
            };
          })
          .width(600)
          .height(200)
          .margins({top: 10, right: 10, bottom: 10, left: 10});

        chart.draw({
          stacked: [
            {key: 'a', name: 'A', values: [{x: 0, y: 10}]},
            {key: 'b', name: 'B', values: [{x: 0, y: 20}]},
            {key: 'c', name: 'C', values: [{x: 0, y: 50}]},
            {key: 'd', name: 'D', values: [{x: 0, y: 30}]},
            {key: 'e', name: 'E', values: [{x: 0, y: 40}]}
          ]
        })
      </script>
    </section>
  </div>
</body>
</html>